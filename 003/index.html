 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Solar-Lunar Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link rel="stylesheet" href="css/weather-icons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
 <link rel="stylesheet" href="css/styles.css">
 <!-- load the responsive styles last: -->
 <link rel="stylesheet" href="css/responsivestyles.css">
 <link rel="icon" type="image/png" href="images/apple-touch-icon.png">
 <link rel="apple-touch-icon" sizes="144x144" href="images/apple-touch-icon.png" />
 <style type="text/css">
    .today {
/*      width: <?php echo $daylightpercent_boston; ?>;*/
      text-align: center;
  		font-size: 1em;
      color: #fff;
      /* background-color: #d9d9da; */
      background-color: goldenrod;
  		margin: 0;
      }
  </style>
</head>
<body onload="setSeason()">

    <div id = "top" class="container">
        <h1 id='today' class="date-header">FEB 09 2025</h1>
        <h3 id='nthday' class = 'info'>Day of 365</h3>
      <div class="labels">
        <div>JAN</div>
        <div>|</div>
        <div>FEB</div>
        <div>|</div>
        <div>MAR</div>
        <div>|</div>
        <div>APR</div>
        <div>|</div>
        <div>MAY</div>
        <div>|</div>
        <div>JUN</div>
        <div>|</div>
        <div>JUL</div>
        <div>|</div>
        <div>AUG</div>
        <div>|</div>
        <div>SEP</div>
        <div>|</div>
        <div>OCT</div>
        <div>|</div>
        <div>NOV</div>
        <div>|</div>
        <div>DEC</div>
        </div>
        <progress id='progressBar' max="365" value='300'></progress>
        <hr id="divider">
        <!-- begin moon phase info -->
        <div class="center" id="thecenter">
      		<h3 class = 'info'>Moon Info <i title = '<?php echo $thename ?>' class= '<?php echo $themoonicon ?>'></i></h3>

       <div class="row">
        <div class="col"><h3 style="text-align: center; margin:0; text-decoration: underline;">&nbsp;&nbsp;Phase&nbsp;&nbsp;</h3></div>
        <div class="col"><h3 style="text-align: center; margin:0; text-decoration: underline;">&nbsp;&nbsp;Illumination&nbsp;&nbsp;</h3></div>
        <div class="col"><h3 style="text-align: center; margin:0; text-decoration: underline;">&nbsp;&nbsp;Moon Age&nbsp;&nbsp;</h3></div>
        <div class="last" /></div>
      </div><!--  close the row -->

       <div class="row" id="contain_moon">
        <div class="col"><h3 style="text-align: center; margin:0;"><span id='moonphasename'>$theilluminationpercentage</span></h3></div>
        <div class="col"><h3 style="text-align: center; margin:0;"><span id='moonilluminationpercentage'>$theilluminationpercentage</span></h3></div>
        <div class="col"><h3 style="text-align: center; margin:0;">&nbsp;&nbsp;<span id='moonage'>$theilluminationpercentage</span></h3></div>
        <div class="last" /></div>
      </div><!--  close the row -->

       <p class = "calinfo"><a class = "callink" href="https://jbrigham.com/003/mooncalendar.php">current lunar cycle</a> |  Next full moon: $thenextfull</p>
         <hr id="divider">
      <!-- begin sunrise icon and info -->

          <!-- flexgrid layout -->

          <div class="grid-container">
            <div class="grid-child purple">
                  <!-- <h1>Grid Column LEFT</h1> -->
                  <div class="flipcard">
                      <div class="face front">
                        <div class='border-left'></div>
                        <h2 class="sunrise-label"><i class = 'material-icons myDir'>north_east</i>rising</h2>
                        <!-- the sun -->
                        <p id='thesunriseboston' class="sunrise"><i class = 'material-icons mysize'>wb_sunny</i></p>
                        <!-- the moon -->
                        <h1 class="moon-info"><i class = 'material-icons-outlined mysize_moon'>dark_mode</i><span id='moonriseboston'>mrb</span></h1>
                      </div>
                       <div class="face back">
                         <h2 class="sunrise-label"><i class = 'material-icons myDir'>north_east</i>rising</h2>
                         <!-- the sun -->
                         <p id="thesunriselake" class="sunset"><i class = 'material-icons mysize'>wb_sunny</i>$mySunriseTime_lake</p>
                         <!-- the moon -->
                         <h1 class="moon-info"><i class = 'material-icons-outlined mysize_moon'>dark_mode</i><span id='moonriselake'>mrl</span></h1>
                         <div class='border-right'></div>
                      </div>
                    </div>
              </div>
            <div class="grid-child green">
                  <!-- <h1>Grid Column RIGHT</h1> -->
                  <div class="flipcard">
                      <div class="face front">
                        <div class='border-left'></div>
                        <h2 class="sunrise-label">setting<i class = 'material-icons myDir'>south_east</i></h2>
                        <!-- the sun -->
                        <p id='thesunsetboston' class="sunrise"><i class = 'material-icons mysize'>wb_sunny</i></p>
                        <!-- the moon -->
                        <h1 class="moon-info"><i class = 'material-icons-outlined mysize_moon'>dark_mode</i><span id='moonsetboston'>msb</span></h1>
                      </div>
                       <div class="face back">
                         <!-- <i class = 'material-icons-outlined loc mysize_moon'>cottage</i> -->
                         <h2 class="sunrise-label">setting<i class = 'material-icons myDir'>south_east</i></h2>
                         <!-- the sun -->
                         <p id="thesunsetlake" class="sunset"><i class = 'material-icons mysize'>wb_sunny</i>$mySunsetTime_lake</p>
                         <!-- the moon -->
                         <h1 class="moon-info"><i class = 'material-icons-outlined mysize_moon'>dark_mode</i><span id='moonsetlake'>msl</span></h1>
                         <div class='border-right'></div>
                      </div>
                    </div>
              </div>

            <div class="therow">
                <!-- <h1>time diff line</h1> -->
                <div class="flipcard">
                    <div class="face front">
                      <div class='border-left'></div>
                      <h3 id = 'timediffboston' class = 'info'> x hours x  minutes of daylight </h3>

                    </div>
                     <div class="face back">
                       <h3 id = 'timedifflake' class = 'info'><?php echo $timediff_lake->format('%h hours %i minutes') ?> of daylight </h3>
                       <div class='border-right'></div>
                    </div>
                  </div>
              </div>
           </div>  <!--  grid-container  -->
    
        <!-- </div>   closes #thetop .container  -->

        <div class="container">
          <div class="switches-container">
            <input type="radio" id="r-boston" name="location-switch" value="boston" checked="checked" onclick="flip()" />
            <input type="radio" id="r-lake" name="location-switch" value="lake" onclick="flip()"/>
            <label for="r-boston">in Boston</label>
            <label for="r-lake">at the Lake</label>
            <div class="switch-wrapper">
              <div class="switch">
                <div>in Boston</div>
                <div>at the Lake</div>
              </div>
            </div>
          </div>
          <p><small> </small></p>
        </div>

      <div class="fullday">full day</div>
      <div class="longestday">longest day</div>
      <div id='today' class="today">today</div>
      <div class="shortestday">shortest day</div>
      <span></span>
      <div class="wrapper">
        <h2 class = "chart-title">DAY LENGTH 2025</h2>
        <canvas id="myChart"></canvas>
      </div> <!-- end of the wrapper div -->
      <div id="footnote"></div>
      <div class="steps">
        <div class="step" id="winter"></div>
        <div class="step" id="spring"></div>
        <div class="step" id="summer"></div>
        <div class="step" id="fall"></div>
      </div>
    <!-- </div>  close the container -->

  <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.5/chartjs-plugin-annotation.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/ocanvas/2.8.3/ocanvas.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script  src="js/chartinfo.js"></script>
  <script  src="js/script.js"></script>
  <script  src="js/suncalc.js"></script>
  <script  src="js/mooninfo.js"></script>
  <script>

      // use variables and target necessary elements (as done in styles.php)
      // or, possibly set a css variable for those elements
      
      function setSeason() {
        //for updating the season steps in the footer
        const currDate = new Date();
        let currMo = currDate.getMonth();
        let winter = document.getElementById("winter");
        let spring = document.getElementById("spring");
        let summer = document.getElementById("summer");
        let fall = document.getElementById("fall");
        let r = document.querySelector(':root');


        if (currMo == '0' || currMo == '1' || currMo == '2') {
            
            // set css variables for winter
            r.style.setProperty('--bgcolor', '#808082');
            r.style.setProperty('--bgcolor_tint', '#a6a6a8');
            winter.style.borderColor = "#fff";
            spring.style.borderColor = '#B8C923';
            summer.style.borderColor = '#33B7DE';
            fall.style.borderColor = '#E0712B';
        } else if (currMo == '3' || currMo == '4' || currMo == '5') {
            
          // set css variables for spring
          r.style.setProperty('--bgcolor', '#B8C923');
          r.style.setProperty('--bgcolor_tint', '#373c0a');
          winter.style.borderColor = '#808082';
          spring.style.borderColor = "#fff";
          summer.style.borderColor = '#33B7DE';
          fall.style.borderColor = '#E0712B';
        } else if (currMo == '6' || currMo == '7' || currMo == '8') {
            
          // set css variables for summer
          r.style.setProperty('--bgcolor', '#33B7DE');
          r.style.setProperty('--bgcolor_tint', '#0f3743');
          winter.style.borderColor = '#808082';
          spring.style.borderColor = '#B8C923';
          summer.style.borderColor = "#fff";
          fall.style.borderColor = '#E0712B';
        } else if (currMo == '9' || currMo == '10' || currMo == '11') {
            
          // set css variables for fall
          r.style.setProperty('--bgcolor', '#E0712B');
          r.style.setProperty('--bgcolor_tint', '#43220d');
          winter.style.borderColor = '#808082';
          spring.style.borderColor = '#B8C923';
          summer.style.borderColor = '#33B7DE';
          fall.style.borderColor = "#fff";
        } else {
          document.getElementById("theSeason").innerHTML = "nothing ELSE";
        }
      }
      
      let allColumns = document.querySelectorAll(".flipcard");

      function flip() {
        const selections = document.querySelectorAll('input[name="location-switch"]');

        let userSelection;
        for (const selection of selections) {
          if (selection.checked) {
            userSelection = selection.value;
            if (userSelection == "lake") {
              allColumns.forEach((column) => column.classList.add("flipped"));
            } else {
              allColumns.forEach((column) => column.classList.remove("flipped"));
            }
          }
        }
      }
  </script>
</body>
</html>
